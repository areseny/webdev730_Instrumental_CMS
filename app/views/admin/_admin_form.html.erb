<% if model.errors.any? %>
  <div class="alert alert-warning">
    <a href="#" class="close" data-dismiss="alert">×</a>
    <strong><%= fa_icon 'warning', "Por favor corrija os seguintes erros:" %></strong>
    <ul>
      <% model.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end -%>
    </ul>
  </div>
<% end -%>

<% scope = local_assigns[:scope] %>

<%= form_for [:admin, scope, model].compact,
             :html => { class: 'form-horizontal', autocomplete: 'off' } do |f| %>

  <% field_options = local_assigns[:field_options] || {} %>

  <% attributes.each do |att| %>
    <div class="form-group <%= ('has-error' if model.errors[att].any?) %>">
      <%= f.label att, :class => "col-sm-2 control-label" %>
      <div class="col-sm-10">
        <%= f.admin_field att, field_options[att.to_sym] %>
      </div>
    </div>
  <% end -%>

  <div class="form-group">
    <hr />
    <div class="col-sm-offset-2 col-sm-10">
      <%= f.button type: 'submit', class: 'btn btn-success' do %>
        <%= fa_icon :save, "Salvar" %>
      <% end -%>
      <% if local_assigns[:extra_buttons] %>
        <%= raw local_assigns[:extra_buttons].join %>
      <% end -%>
      <%= link_to [:admin, scope, model.class.model_name.route_key].compact,
                  :class => 'btn btn-default' do %>
        <i class="glyphicon glyphicon-list"></i> Voltar à lista
      <% end -%>
      <% if model.persisted? %>
        <%= link_to [:admin, scope, model].compact,
                    :class => "btn btn-danger",
                    :method => :delete,
                    :style => "margin-left: 25px;",
                    :data => { :confirm => "Tem certeza que deseja apagar o #{model.class.model_name.human.downcase}?" } do %>
          <%= fa_icon 'trash-o', "Apagar" %>
        <% end -%>
      <% end -%>
    </div>
  </div>

<% end -%>
